


## Flux Pattern

<br>


### Flux Pattern 이란?


`SPA(Single Page Application)` 프론트엔드 프레임워크를 위해 facebook 에서 소개한 아키텍쳐 패턴

<br>



### 왜 나옴

클라이언트 사이드에서 `MVC 패턴`을 사용하여 애플리케이션을 빌드 할 때 발생하는 확장성 문제를 해결하기 위해 나왔다.


<br>


### MVC가 왜 문제

MVC 구조에서의 데이터 흐름이다.

> Action -> Controller -> Model <-> View


많은 모델과 뷰 컴포넌트를 가지는 애플리케이션으로 확장되어 프로그램이 커질 경우

너무 복잡해져 모든 컴포넌트에 데이터가 전달되는 방식과 서로의 관계를 관리하기가 매우 어려워 진다.

뷰가 많은 모델들과 연관되고 모델이 많은 뷰들과 연관되어 복잡해진다.

<br>


<br>

### Flux Pattern

Flux 패턴은 `단방향 데이터 흐름`을 사용해 앱의 다양한 컴포넌트 뷰들 간에 데이터를 전달할 수 있게 하여 확장성 문제를 해결하는 패턴이다.

<br>

![heahahaha](https://user-images.githubusercontent.com/76927397/181915047-c7ad1af8-3b4d-4cd8-985b-043951fa23d5.JPG)

<br>

애플리케이션은 `store` , `dispatcher` , `views` , `actions` 로 나뉜다.


(1) 사용자가 `뷰`를 통해 상호작용하려 하면

(2) `View` 는 메인 `Dispatcher` 를 통해 `Store` 로 `Action`을 보낸다 

> Store 에는 모든 프로그램 데이터가 유지되며 그 중 오로지 필요한 정보로만 해당되는 뷰를 업데이트 해준다.

<br>

Flux 패턴은 리액트 같은 `선언적 프로그래밍` 에 매우 적합하다.

> 선언적 프로그래밍: 어떻게 하는지(목표를 위한 과정)를 나타내기 보다 무엇(필요한것) 을 기술하는 데 중점을 둔다.

<br>


### 아키텍처 구조


**Store**

`Store` 는 `앱 전체의 상태관리`와 수신한 요청 기반으로 `뷰를 업데이트 하기 위해 데이터를 보내`는 책임을 지닌다.

`Store` 와 상태는 다른 개념이라고 할 수 있다.

`State`는 데이터 값이며 `Store` 는 메소드를 통해 상태를 관리하는 행위 객체이다. 

<br>


**Dispatcher**

`Dispatcher` 는 앱의 상태 갱신을 위해 `Store` 에 액션 타입을 알려주는 객체로 액션을 감지하고 스토어에 전달한다.

앱 상태 갱신을 위해 `Store`에 새로운 데이터가 필요할 때 액션타입과 Payload 를 전달 한다.

<br>

**View**

사용자 인터페이스 컴포넌트이며 프로그램과 사용자 간 상호작용 방법을 결정해준다.

사용자 행위 이벤트를 감지하고 그에 따른 컴포넌트 상태가 변경되었을 때 리렌더링 해준다.

<br>

뷰는 표현형과 컨테이너 형으로 나뉜다.

`컨테이너 뷰`는 `Store` 와 연결된다.

뷰 계층구조 최상단에 위치해 Store로부터 이벤트를 수신하는 뷰를 컨트롤러 뷰라고 한다.

Store로부터 데이터를 가져오고 이 데이터를 자손 아래로 전달하기 위한 의존코드를 제공한다.

<br>

**Actions**

Store에 대한 요청을 동작시키기 위해 Dispatcher가 노출하는 메소드이다.

`Actions` 의 생성은 Action을 Dispatcher에 보내는 헬퍼 메소드로 래핑될 수 있다.

`Actions`는 서버 같이 외부로부터 올 수도 있다.


<br>


### Redux

<br>

![redux](https://user-images.githubusercontent.com/76927397/181916399-7fb5a5a4-f367-4ff0-9f02-417fdb930bd6.JPG)

<br>

Flux 아키텍쳐를 만드는 상태관리 라이브러리로 Flux 패턴을 변형한 형태이다.

Flux 패턴에서 Dispatcher를 통해 액션을 감지해 Store를 업데이트한다고 했다.

Redux는 Dispatcher + Store 개념인 `Reducer` 가 존재한다.

Redux의 Store는 애플리케이션에서 유일하며 뷰를 Wrapping 하는 역할만 한다.

**불변성**

- 리듀서가 관리하는 모든 상태를 불변하도록 설정하며 업데이트 시 새로운 객체를 복사하는 형태이다.

- 불변 데이터 활용으로 무결성을 보장하고 사이드 이펙트 없이 상태 갱신을 하도록 강제된다.

<br>


**Singleton**

- Redux는 상태를 지니는 역할을 리듀서로 넘기고 모든 종류의 리듀서가 하나의 스토어에 묶이도록 설계되었다.

- 뷰는 하나의 스토어를 통해서만 리듀서에 접근할 수 있다.


 
