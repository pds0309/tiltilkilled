


## 프로세스

- 프로그램이 메모리 위에 할당되어 실행중인 상태인 것을 말한다.

- 프로그램은 일반적으로 보조기억장치에 저장되어 아무 일도 하지 않으나 프로세스로 전환되면 운영체제로부터 프로세스 제어 블록을 할당 받는다.

<br>


### 프로세스 상태 (생성, 준비, 실행, 대기, 종료)

**New**

- 프로그램이 메인 메모리에 할당된다.
- 프로세스에 메모리가 할당되고 PCB가 생성된 상태를 의미함

> PCB(Process Control Block) : OS 가 프로세스를 제어하기 위해 정보를 저장해 놓는 곳으로 프로세스 생성 시 만들어지며 주기억 장치에 유지된다.


**Ready**

- 할당된 프로그램이 초기화 등의 작업을 통해 실행을 위한 준비를 마친 상태

- 생성된 프로세스가 CPU를 할당받고 실행될 때 까지 자기 순서를 기다리는 상태다.


**Running**

- CPU를 할당받아 해당 프로세스가 수행되는 상태

**Waiting**

- 프로세스가 끝나지 않은 시점에서 I/O 로 인해 CPU를 사용하지 않고 다른 작업을 한다.

**Terminated**

- 프로세스가 작업을 완료하여 메모리가 해제되고 PCB 가 삭제된 상태


<br>

### PCB(Process Controll Block


- PCB는 커널의 데이터 공간에 존재하는 프로세스 정보를 저장하는 자료구조

- PCB 안에는 프로세스의 상태, 프로세스 번호(PID), Program Counter, register 값, MMU 정보, CPU 점유 시간 등이 있다.

- CPU는 한 프로세스가 종료될 때 까지 수행하는 게 아니라 여러 프로세스를 계속 바꿔가며 수행하기 때문에 수행이 완료되지 않은 프로세스들의 정보를 저장해두었다가
향후에 수행할 수 있어야 한다. 이 때 이런 정보를 PCB에 저장하는 것이다.


<br>

### 프로세스 큐

- 프로세스는 일반적으로 여러개가 한번에 수행되기때문에 순서가 필요하며 순서를 대기하는 곳이 있다.

**Job Queue**

- 하드디스크에 있는 프로그램이 실행되기 위해 메인 메모리에의 할당에 대해 대기한다.


**Ready Queue**

- CPU 점유에 대한 대기를 한다.

**Device Queue**

- I/O 를 하기 위한 각 장치에 대해 대기를 한다.


이런 대기에 대해 순서를 정해주는 알고리즘을 `스케줄링` 이라고 함



### Context Switching

- 하나의 프로세스가 CPU를 사용하면서도 다른 프로세스가 CPU를 사용할 수 있게

이전의 프로세스의 상태(Context) 를 보관해두고 새로운 프로세스를 적재하는 일을 말한다.

- 대기 상태로 변경된 프로세스의 문맥을 PCB에 저장하고 새로 실행된 프로세스의 PCB에서 해당 프로세스의 문맥을 복원시킨다.

**언제 문맥 교환이 발생하냐?**

- 프로세스의 CPU 할당 시간을 소진했을 때

- 인터럽트로 CPU가 선점 당했을 때

- 입출력이 발생했을 때




**CPU Scheduler**

- CPU가 어느 프로세스를 선택할지 정한다.

**Dispatcher**

- 실제 문맥 교환 발생하면 CPU의 내부 데이터를 이전 프로세스 데이터에서 새로 시작되는 데이터로 바꿔줌

**Context Switching Overhead**

- 당연히 문맥교환의 발생은 오버헤드가 있다.

- Dispatcher에서 수행하는 작업을 수행할 때 마다 오버헤드가 있다.

- 오버헤드를 줄이기 위해서는 Dispatcher를 구현하는 코드가 효율적이어야 한다.



