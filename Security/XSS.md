

## What is XSS


**XSS (Cross-Site Script) : 크로스 사이트 스크립팅**

- 웹 애플리케이션 취약점 공격의 하나이다.

- 웹 사이트 관계자가 아닌 사람이 웹 페이지에 **스크립트**를 삽입할 수 있을 때 발생한다.

- 모든 사용자들이 볼 수 있는 컨텐츠(게시판 같은)에 악성 스크립트를 삽입하는 방식으로 이루어진다.

- 사용자가 웹 사이트를 신뢰하는 점을 노리고 하는 공격이다.


<br>

### 활용방안

1. 스크립트를 통해 피해자 인증정보를 탈취해 사칭할 수 있다.

2. 악성 프로그램 설치 경로로 리다이렉트 시키는 스크립트를 심어 설치를 유도시킨다.

3. 이미지 태그 등을 이용해 광고 같은 의도하지 않은 것을 노출시킬 수 있다.






<br>


### 종류

**Reflected XSS**

- 공격자가 악성 코드를 피해자에게 직접 전달하여 공격하는 방법

- 서비스 내에 링크를 남길만한 곳이 있다면 악성코드를 심어 올리고 피해자가 클릭했을 때 피해자의 세션 쿠키를 탈취한다.

- SQL Injection  1 = 0, 0 = 0처럼 악성코드를 심을 수 있는 공간에 `alert` 같은 스크립트를 넣고 확인 해보며 취약점이 있는지 확인해볼 수 있다.


**Stored XSS**

- 서버에 스크립트를 저장했다가 나중에 실행되어 공격하는 것

- 게시글이나 댓글 등록에 스크립트를 삽입해 DB에 저장시키고 불특정 다수의 사용자가 조회할 때 스크립트를 실행시킨다.


**DOM Based XSS**

- 피해자의 브라우저에서 DOM 환경을 수정해 공격하는 것

- 서버의 결함과 관계없다.
	- 피해자가 요청했을 때 DOM 객체 생성과정에서 악성스크립트도 포함시켜 실행하게끔 하는 것이다.






<br>

### 대응 방법

**유저의 입력값 검증을 서버에서 반드시 진행한다.**

- XSS 는 사용자 요청값에 대한 검증을 제대로 수행하지 않았을 때 발생한다.

**HTML 코드로 인식될 수 있는 특수문자 문자열 입력에 대해 반드시 인코딩 할 수 있어야 한다**

	- `< : &lt;`
 	- `> : &gt;
	- `& : &amp;`
	- `( : &#40`
	- `) : &#41`


- HTML 태그 삽입이 허용되어야 하는 상황이라면 화이트리스트를 만들고 나머지 태그는 제한시킨다.

**CSP(콘텐츠 보안 정책) 를 활용해 정해진 CDN 스크립트 등에 대해서만 허용시키도록 정책을 설정해주면 악성 스크립트의 동작을 방지할 수 있다.**

**세션 사용시 `HttpOnly` 속성을 설정하여 스크립트로 세션을 로드하지 못하게 할 수 있다.**


### 마무리

**완벽하게 막을 수는 없다고 한다. 방법이 무궁무진 하다고 한다. 우회기법이 많다고 한다. 최소한의 방어는 하자!**



 