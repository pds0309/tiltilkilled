


### 60. 정확한 답이 필요하다면 float과 double 은 피하라

<br>


float 과 double 은 과학과 공학 계산용으로 이진 부동소수점 연산에 사용되며 넓은 범위의 수를 빠르게 `근사치`로 계산하도록 설계됨

따라서 `정확한 결과` 가 필요할때는 사용하지 말자


<br>

> 주머니에 1달러가 있는데 0.1달러짜리 사탕 9개를 사고 남은 돈은?

```java
System.out.println(1.00 - 9 * 0.10);
```

이 코드는 `0.099999999999998` 을 출력한다.

<br>

**금융 계산에는 `BigDecimal`, `int` , `long` 을 사용하자**

- 문자열을 매개변수로 생성자를 사용해 객체를 생성해 사용한다.

- 여덟가지 반올림 모드를 제공해주기 때문에 반올림을 제어할 수 있다.


```java

final BigDecimal TEN_CENTS = new BigDecimal(".10");

void run() {
    BigDecimal funds = new BigDecimal("2.00");
    System.out.println(funds - TEN_CENTS);
}
```

<br>

> 단점

- 기본타입보다 쓰기가 불편하고 느림

대안으로 `int` 나 `long` 을 사용할 수 있으나 값이 한정적이고 소수점의 경우 직접 관리해주어야 한다.

위의 예제에서는 달러단위 계산을 모두 센트단위로 변경할 경우 해결될 수 있다.

<br>

### 요약

- 정확한 답을 구해야 하는 문제에서 `float` , `double` 사용하지 말라

- 성능 고려를 하지 않으며 시스템에 계산을 맡겨야 하는 경우 `BigDecimal` 을 사용하자

- 성능이 중요하고 소수점을 직접 핸들링 할 수 있을 정도로 숫자가 크지 않다면 `int` 나 `long` 을 사용하자

- `18자리 십진수로 표현이 안 될 경우 BigDecimal 사용을 권장한다`

