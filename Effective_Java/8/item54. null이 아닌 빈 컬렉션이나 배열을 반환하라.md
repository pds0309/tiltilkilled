


### 54. null이 아닌 빈 컬렉션이나 배열을 반환하라

<br>

컬렉션이나 배열 같은 컨테이너가 비었을 때 null을 반환하게 하는 것은 좋지 않다.

사용하는 곳에서 null을 반환하게 될 경우에 대한 방어코드를 항상 넣어줘야 하기 때문이다.

컨테이너 내부 데이터가 0개일 가능성이 거의 없는 경우 수 년뒤에 오류가 발생하기도 한다고 한다.

<br>


**빈 컨테이너 할당도 비용이니 null 반환이 낫다는 것은 잘못되었다!**


1. 성능 분석 결과 빈 컨테이너 할당이 성능 저하의 원인이라고 확인되지 않으면 신경 써야할 정도의 수준이 아니다.

2. 빈 컬렉션과 배열은 굳이 새로할당하지 않고도 반환할 수 있다.


<br>


**빈 컬렉션 만들기**

가능성은 작으나 사용 방법에 따라 빈 컬렉션 할당dl 성능에 영향이 갈 수 있다.

매번 같은 비어있는 불변 컬렉션을 반환하게끔하여 해결할 수 있다.


```java

Collections.emptyList()

```

`list` 의 예시이고 알맞는 컬렉션에 따라 사용하면 된다.

단 최적화 방법에 해당되니 꼭 필요할 때만 전후 성능 측정 후 사용하자

<br>


**요약**

`null` 이 아닌 빈 배열이나 컬렉션을 반환하게끔 사용하자.

`null`을 반환하는 api는 사용이 어렵고 오류 처리 코드가 강제되며 성능이 뛰어난 것도 아니다.

