


### item53. 가변인수는 신중히 사용하라


<br>


가변인수(varags) 메소드는 명시한 타입의 인수를 0개 이상 받을 수 있다.

가변 인수 메소드 호출 시 인수의 개수로 배열 길이을 할당하고 배열에 인수들을 넣어주어 메소드에 건네준다.


```java
int sum(int... args) {
    int sum = 0;
    for(int arg : args) {
        sum += arg;
    }
    return sum;
}
``` 

> sum(0) : 0, sum(1,2) : 3


인수를 반드시 1개 이상 받아야 할 경우가 있을 때 물론 메소드 내부에서 인수가 없을 경우에 대한 예외를 처리해주면 된다.

하지만 런타임 시에 예외가 발생하며 코드도 지저분해진다.

`args` 유효성 검증을 직접 해줘야 하며 의도된 동작을 위해 따로 초기값 설정이 필요할 수 있다.


이런 문제 방지를 위해 파라미터를 기본 + 가변인수로 받는 방법이 있다.


```java
int sum(int firstArg, int... args) {
    int sum = firstArg;
    for(int arg : args) {
        sum += arg;
    }
    return sum;
}
``` 

<br>

**가변 인수는 파라미터 개수가 정해지지 않았을 때 유용하지만 성능에 민감할 경우 걸림돌이 될 수 있다.**

- 메소드 호출 시 마다 가변인수를 활용한 배열이 할당되고 초기화된다.

<br>

많은 인수가 필요한 경우가 많지 않을 경우를 예로 들자

대부분 인자 3개 이하만으로 사용이 된다면 그 인자 3개까지 메소드 오버로딩을 활용하여 정의해주고 사용하도록 하며

그 이상일 경우를 가변 인수를 활용하도록 메소드를 정의해 사용할 수 있다.


<br>

`EnumSet` 의 정적 팩터리도 이 기법을 사용해 열거 타입 집합 생성 비용을 최소화 한다.


<br>


**요약**

- 인수 개수가 일정하지 않은 메소드 정의 시 가변인수가 반드시 필요한데 필수적인 인자라면 가변인수 앞에 파라미터로 두자.

- 가변인수 메소드 사용 시 성능이 문제가 될 수 있기 때문에 생각하자.



 