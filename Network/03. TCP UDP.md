


### TCP & UDP 요약

<br>


**프로토콜이란?**

- 컴퓨터나 단말기 사이에서 데이터 통신 시 원활하게 해주게 하기 위한 통신 규약

- 메시지 송수신 양식과 규칙, 신호의 송신 순서, 데이터 표현법, 오류 검출 등을 정해둠





**TCP(Transmission Control Protocol)**

- OSI 4계층(전송계층)에서 사용하는 프로토콜로 서버와 클라이언트간 데이터를 신뢰도 있게 전달하기 위해 만들어진 프로토콜

- IP와 함께 TCP/IP 라는 명칭으로 불림

- `웹` 이나 `이메일` 처럼 데이터가 정확하게 전달 되어야 하는 통신환경에서 사용된다.

- 양방향통신, 데이터 순차 전송을 보장하며 수신 버퍼 오버 플로우 방지 흐름제어와 네트워크 과부화 방지 혼잡제어 역할을 수행한다.

- **호스트 사이에 먼저 세션이 설정되고 그 연결을 통해 양뱡향으로 데이터가 오가는 연결지향형 통신이며 보내는 순서가 유지된다.**


> 흐름제어: 송수신 데이터 생성,사용 속도를 맞추는 것

> 혼잡제어: 네트워크망 혼잡으로 인한 통신 충돌을 방지하고 네트워크 자원을 잘 분배해주는 것 

<br>

**TCP 헤더**

- TODO: 책 보고 찾아서 정리하기

<br>


**3 Way Handshaking**

- 양쪽 모두 데이터 전송이 준비되어있다는 것을 보장하고 데이터 전달 전 한쪽에서 반대쪽이 준비되어있다는 것을 알게 해주는 역할을 함

- 신뢰성 있는 연결을 맺어주기 위한 과정

<br>


![image](https://user-images.githubusercontent.com/76927397/177915709-c9c48495-4923-4970-8ef7-9205cbde4f53.png)

<br>

> SYN: 연결요청

> ACK: 요청을 받았다는 응답


1. 클라이언트가 서버에 접속 요청을 하는 SYN 패킷을 보내고 응답을 기다리는 `SYN_SENT` 상태가 됨

2. 서버가 SYN 패킷을 받고 요청을 수락한다는 ACK 패킷과 SYN flag 가 설정된 패킷을 클라이언트에 발송하고 응답을 기다리는 `SYN_RECEIVED` 상태가 됨

3. 서버로부터 받은 ACK 패킷을 보내 연결을 성공하고 이걸 받으면 서버는 `ESTABLISHED(포트연결)` 상태가됨



<br>

**4 Way Handshaking**

- 연결되었던 세션을 종료하는 절차이다.

<br>

![image](https://user-images.githubusercontent.com/76927397/177916858-816f5404-c31c-4f57-9790-bd17baf16171.png)

<br>

1. 클라이언트가 연결 종료하겠다는 FIN 플래그 전송

2. 서버가 확인메시지를 클라이언트에 전송하고 자신의 통신이 끝날 때 까지 기다린다.

3. 서버가 통신이 끝나면 연결이 종료되었다고 FIN 플래그를 클라이언트에 전송해 알린다.

4. 클라이언트가 서버에 확인했다는 메시지를 보낸다.


> 연결종료 후 TIME_WAIT: 클라이언트가 세션 종료 후 뒤늦게 도착하는 패킷이 있었을 때 이의 유실을 방지하기 위해 일정시간 세션 종료를 지연시켜주는 시간임


<br>

<br>

**UDP(User Datagram Protocol)**

- 비연결형, 무신뢰성 프로토콜

- 데이터 송수신 시 정보를 송수신한다는 신호를 주는 절차를 거치지 않고 **보내는 쪽에서 일방적으로 데이터를 전달하는 프로토콜**

- 전송계층에서 오류제어 같은 과정이 필요없는 단순 프로토콜이나 내부적으로 흐름/오류 제어 로직을 가진 프로세스에서 사용한다.

- 실시간성이 강한 실시간 스트리밍, 음성 서비스 등에서 활용

- 전송 순서가 유지되지 않으며 데이터 중복이나 손실이 가능하다.

- TCP와 달리 연결사전절차가 없기 때문에 부하가 낮고 전송속도가 빠르며 1:1 이상의 통신을 지원한다



 